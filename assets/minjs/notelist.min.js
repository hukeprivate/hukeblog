function Notelist(){return this instanceof Notelist?void this.init():new Notelist}var TimeUtils=$.getTimeUtils();Notelist.prototype={folderId:$.getUrlPara("folderId"),filesArr:[],init:function(){$.hkLoading(),$.toTop(),this.getFolder()},getFolder:function(){console.log("folderId:",this.folderId);var e=this;$.hkAjax("get","/notes/notelist",{fileId:e.folderId},function(t){console.log("res:",t),$.disHkLoading(),document.title=$.renderDocTitle(t.title),e.addImgLinkAndTimeLabels(t),e.sortByCreatedDate(t),e.renderNoteList(t)})},sortByCreatedDate:function(e){for(var t=e.notes.length,n=0;n<t;n++)e.notes[n].notes.sort(function(e,t){return t.createdDate-e.createdDate})},addImgLinkAndTimeLabels:function(e){for(var t=e.notes.length,n=0;n<t;n++)for(var o=0;o<e.notes[n].notes.length;o++)this.addLink(e.notes[n].notes[o]),this.addTimeLabel(e.notes[n].notes[o])},addTimeLabel:function(e){e.timeLabel=TimeUtils.getLabelByTimestamp(e.createdDate).toUpperCase()},addLink:function(e){var t=marked(e.content),n=document.createElement("div");n.innerHTML=t;var o=n.getElementsByTagName("img")[0],i=o?o.src:"";e.imgLink=i},renderNoteList:function(e){var t=template("tpl-cate-names",e);$(".category-names").html(t);var n=template("tpl-note-list",e);$(".note-list").html(n);var o=window.location.hash.substr(1);o&&(location.href="#"+o),$.addDsqScript("")}},Object.defineProperty(Notelist.prototype,"constructor",{enumerable:!1,value:Notelist}),$(function(){new Notelist});