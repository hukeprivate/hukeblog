function Header(){return this instanceof Header?void this.init():new Header}var TimeUtils=$.getTimeUtils();Header.prototype={boxDataArr:[],init:function(){this.initScrollEvent(),this.reqNavList()},initBodyEvent:function(){$(".icon-menu").click(function(){return $(this).siblings("ul").show(),!1}),$(".small-device ul").click(function(){return!1}),document.body.addEventListener("click",function(){$(".small-device ul").hide()},!1)},reqNavList:function(){var e=this;$.hkAjax("get","/notes/",{},function(t){console.log("nav res:",t);var n=template("tpl-nav",t),i=template("tpl-nav-small",t);$(".m-title-list").prepend(n),$(".small-device ul").html(i),e.prcResBox(t);var o=template("tpl-box-wrapper",t);$("header").append(o),e.initHeaderTitleEvent()})},prcResBox:function(e){for(var t=e.notes.length,n=11,i=3,o=0;o<t;o++){var s=e.notes[o].notes.length;this.sortByLength(e.notes[o].notes),s>i&&(e.notes[o].notes=e.notes[o].notes.slice(0,i),s=i);for(var a=0;a<s;a++){var l=e.notes[o].notes[a].notes.length;l>n&&(e.notes[o].notes[a].notes=e.notes[o].notes[a].notes.slice(0,n),l=n)}}},sortByLength:function(e){e.sort(function(e,t){return t.notes.length-e.notes.length})},prcsResTime:function(e){$.each(e.notes,function(e,t){var n=Math.abs(TimeUtils.getCrtTimeStamp()-t.createdDate);t.timeLabel=TimeUtils.getLabelByTimestamp(n).toUpperCase()})},initScrollEvent:function(){var e=0;$(window).scroll(function(){var t=$(this).scrollTop();t>e?$("header").addClass("hide-wrap-btn"):$("header").removeClass("hide-wrap-btn"),e=t})},initHeaderTitleEvent:function(){this.boxEvent(),this.initSmallDevMenuEvent(),this.initBodyEvent(),this.menuIconEvent(),this.themeEvent()},initSmallDevMenuEvent:function(){$(".small-device ul li").on("click",function(){var e=$(this).attr("data-url");window.location.href=e})},themeEvent:function(){this.themeIconEvent();var e=$.getCookie("theme");e&&"fudan"==e?this.useFudanTheme():this.useMianzhiTheme()},useMianzhiTheme:function(){$("body").addClass("theme-mianzhi").removeClass("theme-fudan");var e=$(".theme .mianzhi");e.find(".iconfont").addClass("icon-dagou"),e.siblings(".fudan").find(".iconfont").removeClass("icon-dagou")},useFudanTheme:function(){$("body").addClass("theme-fudan").removeClass("theme-mianzhi");var e=$(".theme .fudan");e.find(".iconfont").addClass("icon-dagou"),e.siblings(".mianzhi").find(".iconfont").removeClass("icon-dagou")},themeIconEvent:function(){var e=this;$(".theme").on("mouseover",function(){$(".theme-choose-box").show()}).on("mouseout",function(){$(".theme-choose-box").hide()}),$(".theme .mianzhi").click(function(){e.useMianzhiTheme(),$.setCookie("theme","mianzhi",3),$.hkPopupTip("Theme has been changed successfully :)",3e3),$(".theme-choose-box").hide()}),$(".theme .fudan").click(function(){e.useFudanTheme(),$.setCookie("theme","fudan",3),$.hkPopupTip("Theme has been changed successfully :)",3e3),$(".theme-choose-box").hide()})},boxEvent:function(){var e=$(".box-wrapper");$(".m-title-list li.note-item,.box-wrapper .box").on("mouseover",function(){var t=$(this);if(t.is("li")){var n=t.attr("data-index");e.find(".box").eq(n).show().siblings(".box").hide(),t.addClass("active").siblings().removeClass("active"),e.show()}else{t.show().siblings(".box").hide();var n=t.attr("data-index");$(".m-title-list li").eq(n).addClass("active").siblings().removeClass("active"),e.show()}}).on("mouseout",function(){var t=$(this);if(t.is("li")){var n=t.attr("data-index");e.find(".box").eq(n).hide(),t.removeClass("active"),e.hide()}else{t.hide();var n=t.attr("data-index");$(".m-title-list li.note-item").eq(n).removeClass("active"),e.hide()}})},menuIconEvent:function(){$(".small-device .icon-menu").click(function(){$(this).siblings("ul").show()})}},Object.defineProperty(Header.prototype,"constructor",{enumerable:!1,value:Header}),$(function(){new Header});